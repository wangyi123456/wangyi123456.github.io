# 计算机网络

## 1 OSI七层模型和TCP四层



## 2 三次握手

![img](https://uploadfiles.nowcoder.com/images/20191026/5459305_1572099172612_4A47A0DB6E60853DEDFCFDF08A5CA249)

需要三次而不是两次的原因:服务端需要知道自己的发送没有问题

假如只有前面2次握手，那么服务端来收到SYN并且发出SYN+ACK包之后就会处于工作状态。如果服务端在某一时刻突然收到了一个来自客户端的SYN包，在发出ACK之后，服务端处于工作状态。但是可能这个包是卡了很久已经被客户端给丢弃了。客户端收到SYN+ACK之后，表示情绪淡定不予理会，但是服务端已经处于工作状态了，会造成资源的浪费。

## 3 四次挥手

![图片说明](https://uploadfiles.nowcoder.com/images/20191026/5459305_1572099198711_FB5C81ED3A220004B71069645F112867)

四次挥手主动方为什么需要等待2MSL？

**答：**主动关闭方在收到被动一方发出的FIN信号，会立马发送ACK确认信号，之后状态转变为TIME_WAIT，等待2MSL后才会进入CLOSE状态。我们先来解释下什么叫MSL（Maximum Segment Lifetime）吧。

**MSL表示最大报文生存周期**，任何报文在网络上存在的最长时间，超过这个时间报文将被丢弃。

主动关闭方需要等待2MSL是为了，防止最后一次ACK没有被正确的传给被动方，被动关闭方会再次发送第三次的FIN信号。

4 TCP 和 udp区别

**TCP和UDP协议都是传输层常见的协议**，它们的主要区别如下所示：

- TCP协议进行数据通信之前需要三次握手建立连接，UDP协议不需要建立连接即可发送数据。
- TCP有确认机制，丢包可以重发，保证数据的正确性；UDP不保证正确性，只是单纯的负责发送数据包。
- TCP协议可能会对大数据包进行拆分，并且在接收方进行重组数据包操作；UDP协议是面向报文的，不会进行分片和重组，所以需要注意传输的报文大小。
- 网络包中的TCP头部为20个字节；UDP头部只有8个字节。